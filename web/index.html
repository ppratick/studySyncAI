<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudySync AI - Assignment Manager</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div>
                    <h1>StudySync AI</h1>
                    <p class="subtitle">AI-Powered Assignment Management</p>
                </div>
                <button id="settingsBtn" class="btn-icon" title="Settings">⚙️</button>
            </div>
        </header>

        <div class="controls">
            <button id="syncBtn" class="btn btn-primary">Sync Assignments</button>
        </div>

        <div id="status" class="status"></div>
        
        <div id="syncProgress" class="sync-progress" style="display: none;">
            <div class="sync-progress-header">
                <div class="sync-spinner"></div>
                <span id="syncProgressText">Syncing assignments...</span>
            </div>
            <div class="sync-progress-bar">
                <div id="syncProgressBar" class="sync-progress-bar-fill"></div>
            </div>
            <div id="syncProgressDetails" class="sync-progress-details"></div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="totalAssignments">0</div>
                <div class="stat-label">Total Assignments</div>
            </div>
        </div>

        <div class="filters">
            <select id="courseFilter">
                <option value="">All Courses</option>
            </select>
            <input type="text" id="searchInput" placeholder="Search assignments...">
        </div>

        <div id="assignmentsList" class="assignments-list"></div>
    </div>

    <div id="setupModal" class="modal">
        <div class="modal-content">
            <h2>Initial Setup</h2>
            <div class="info-box" style="margin-bottom: 25px;">
                <p><strong>Welcome to StudySync AI!</strong></p>
                <p style="margin-top: 12px;">To get started, please provide the following information:</p>
                <ul style="margin: 12px 0 0 0; padding-left: 20px; line-height: 1.8;">
                    <li>Your college or university name</li>
                    <li>Reminder list name for each course (required)</li>
                    <li>Whether to automatically add assignments to Apple Reminders (optional)</li>
                </ul>
                <p style="margin-top: 12px; font-size: 0.9em; color: #666;">You can change these settings later in the Settings page.</p>
            </div>
            
            <div class="form-group" style="margin-bottom: 25px;">
                <label for="setupCollegeName" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">College or University <span class="required">*</span></label>
                <select id="setupCollegeName" class="form-select">
                    <option value="">Select your college/university</option>
                    <option value="Arizona State University">Arizona State University</option>
                    <option value="Boston University">Boston University</option>
                    <option value="Carnegie Mellon University">Carnegie Mellon University</option>
                    <option value="Columbia University">Columbia University</option>
                    <option value="Cornell University">Cornell University</option>
                    <option value="Duke University">Duke University</option>
                    <option value="Georgia Institute of Technology">Georgia Institute of Technology</option>
                    <option value="Harvard University">Harvard University</option>
                    <option value="Johns Hopkins University">Johns Hopkins University</option>
                    <option value="Massachusetts Institute of Technology">Massachusetts Institute of Technology</option>
                    <option value="New York University">New York University</option>
                    <option value="Northwestern University">Northwestern University</option>
                    <option value="Ohio State University">Ohio State University</option>
                    <option value="Pennsylvania State University">Pennsylvania State University</option>
                    <option value="Princeton University">Princeton University</option>
                    <option value="Purdue University">Purdue University</option>
                    <option value="Rutgers University">Rutgers University</option>
                    <option value="Stanford University">Stanford University</option>
                    <option value="Texas A&M University">Texas A&M University</option>
                    <option value="University of California, Berkeley">University of California, Berkeley</option>
                    <option value="University of California, Davis">University of California, Davis</option>
                    <option value="University of California, Irvine">University of California, Irvine</option>
                    <option value="University of California, Los Angeles">University of California, Los Angeles</option>
                    <option value="University of California, San Diego">University of California, San Diego</option>
                    <option value="University of California, Santa Barbara">University of California, Santa Barbara</option>
                    <option value="University of Chicago">University of Chicago</option>
                    <option value="University of Florida">University of Florida</option>
                    <option value="University of Illinois at Urbana-Champaign">University of Illinois at Urbana-Champaign</option>
                    <option value="University of Maryland">University of Maryland</option>
                    <option value="University of Michigan">University of Michigan</option>
                    <option value="University of North Carolina at Chapel Hill">University of North Carolina at Chapel Hill</option>
                    <option value="University of Pennsylvania">University of Pennsylvania</option>
                    <option value="University of Southern California">University of Southern California</option>
                    <option value="University of Texas at Austin">University of Texas at Austin</option>
                    <option value="University of Virginia">University of Virginia</option>
                    <option value="University of Washington">University of Washington</option>
                    <option value="University of Wisconsin-Madison">University of Wisconsin-Madison</option>
                    <option value="Yale University">Yale University</option>
                    <option value="Other">Other (enter manually)</option>
                </select>
                    <input type="text" id="setupCollegeNameCustom" placeholder="Enter college name" autocomplete="off" spellcheck="false" style="display: none; margin-top: 10px;">
            </div>
            
            <div class="form-group" id="setupReminderListsGroup" style="margin-bottom: 25px;">
                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Reminder List Names for Courses <span class="required">*</span></label>
                <p class="form-hint" style="margin-bottom: 12px; line-height: 1.6;">Each course needs a reminder list name. This will be the name of the list in Apple Reminders where assignments for that course will be added. You can change these later in Settings.</p>
                <div id="setupCoursesList" class="courses-list"></div>
            </div>
            
            <div class="form-group" style="margin-bottom: 25px; padding: 15px; background: #f8f9fa; border-radius: 6px; border: 1px solid #e0e0e0;">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; margin-bottom: 8px;">
                    <input type="checkbox" id="setupAutoSyncReminders" style="width: 20px; height: 20px; cursor: pointer; accent-color: #667eea;">
                    <span style="font-weight: 600; color: #333;">Automatically sync assignments to Apple Reminders</span>
                </label>
                <p class="form-hint" style="margin-left: 30px; margin-top: 4px; line-height: 1.5;">If enabled, assignments will be automatically added to Apple Reminders when synced. If disabled, you can manually add them using the "Add to Reminders" button on each assignment.</p>
            </div>
            
            <div class="settings-actions">
                <button id="saveAndSync" class="btn btn-primary">Save & Sync</button>
                <button id="cancelSetup" class="btn btn-secondary" style="margin-left: 10px;">Cancel</button>
            </div>
        </div>
    </div>

    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Settings</h2>
            
            <div class="settings-section">
                <h3>Basic Information</h3>
                <div class="form-group">
                    <label for="collegeName">College or University: <span class="required">*</span></label>
                    <select id="collegeName" class="form-select">
                        <option value="">Select your college/university</option>
                        <option value="Arizona State University">Arizona State University</option>
                        <option value="Boston University">Boston University</option>
                        <option value="Carnegie Mellon University">Carnegie Mellon University</option>
                        <option value="Columbia University">Columbia University</option>
                        <option value="Cornell University">Cornell University</option>
                        <option value="Duke University">Duke University</option>
                        <option value="Georgia Institute of Technology">Georgia Institute of Technology</option>
                        <option value="Harvard University">Harvard University</option>
                        <option value="Johns Hopkins University">Johns Hopkins University</option>
                        <option value="Massachusetts Institute of Technology">Massachusetts Institute of Technology</option>
                        <option value="New York University">New York University</option>
                        <option value="Northwestern University">Northwestern University</option>
                        <option value="Ohio State University">Ohio State University</option>
                        <option value="Pennsylvania State University">Pennsylvania State University</option>
                        <option value="Princeton University">Princeton University</option>
                        <option value="Purdue University">Purdue University</option>
                        <option value="Rutgers University">Rutgers University</option>
                        <option value="Stanford University">Stanford University</option>
                        <option value="Texas A&M University">Texas A&M University</option>
                        <option value="University of California, Berkeley">University of California, Berkeley</option>
                        <option value="University of California, Davis">University of California, Davis</option>
                        <option value="University of California, Irvine">University of California, Irvine</option>
                        <option value="University of California, Los Angeles">University of California, Los Angeles</option>
                        <option value="University of California, San Diego">University of California, San Diego</option>
                        <option value="University of California, Santa Barbara">University of California, Santa Barbara</option>
                        <option value="University of Chicago">University of Chicago</option>
                        <option value="University of Florida">University of Florida</option>
                        <option value="University of Illinois at Urbana-Champaign">University of Illinois at Urbana-Champaign</option>
                        <option value="University of Maryland">University of Maryland</option>
                        <option value="University of Michigan">University of Michigan</option>
                        <option value="University of North Carolina at Chapel Hill">University of North Carolina at Chapel Hill</option>
                        <option value="University of Pennsylvania">University of Pennsylvania</option>
                        <option value="University of Southern California">University of Southern California</option>
                        <option value="University of Texas at Austin">University of Texas at Austin</option>
                        <option value="University of Virginia">University of Virginia</option>
                        <option value="University of Washington">University of Washington</option>
                        <option value="University of Wisconsin-Madison">University of Wisconsin-Madison</option>
                        <option value="Yale University">Yale University</option>
                        <option value="Other">Other (enter manually)</option>
                    </select>
                    <input type="text" id="collegeNameCustom" placeholder="Enter college name" autocomplete="off" spellcheck="false" style="display: none; margin-top: 10px;">
                </div>
                
                <div class="form-group" style="margin-top: 20px;">
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" id="settingsAutoSyncReminders" style="width: 20px; height: 20px; cursor: pointer;">
                        <span>Automatically sync assignments to Apple Reminders</span>
                    </label>
                    <p class="form-hint">If enabled, assignments will be automatically added to Apple Reminders when synced. If disabled, you can manually add them using the "Add to Reminders" button on each assignment.</p>
                </div>
            </div>
            
            <div class="settings-section">
                <h3>Course Management</h3>
                <div class="info-box">
                    <p><strong>How to add a course:</strong></p>
                    <p>1. Go to Canvas and navigate to your course</p>
                    <p>2. Click the star icon ⭐ next to the course name to favorite it</p>
                    <p>3. Click "Sync Assignments" - the course will appear here automatically</p>
                    <p style="margin-top: 12px;"><strong>Managing courses:</strong></p>
                    <ul style="margin: 8px 0; padding-left: 20px; line-height: 1.8;">
                        <li><strong>Important:</strong> Each course must have a reminder list name set before syncing</li>
                        <li>Click the reminder list name to set or edit it for that specific course</li>
                        <li>Click the × button to disable a course (assignments won't sync, but existing ones remain)</li>
                        <li>Click the ✓ button to re-enable a disabled course</li>
                        <li>Disabled courses appear greyed out and won't be synced</li>
                    </ul>
                </div>
                <div id="coursesList" class="courses-list"></div>
            </div>
            
            <div class="settings-actions">
                <button id="saveSettings" class="btn btn-primary">Save Settings</button>
            </div>
        </div>
    </div>

    <script src="/app.js?v=3"></script>
</body>
</html>

